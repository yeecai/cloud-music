{"version":3,"sources":["components/list/music.png","components/slider/style.js","components/slider/index.js","components/list/style.js","components/list/index.js","application/Recommend/style.js","application/Recommend/index.js"],"names":["module","exports","SliderContainer","styled","div","style","React","memo","props","useState","sliderSwiper","setSliderSwiper","bannerList","useEffect","length","Swiper","initialSlide","autoplay","delay","disableOnInteraction","pagination","el","type","className","map","slider","index","key","picUrl","src","imageUrl","width","height","alt","ListWrapper","List","ListItem","withRouter","useTranslation","t","i18n","recommendList","item","id","onClick","history","push","placeholder","require","getCount","playCount","name","Content","play","connect","state","getIn","isLoading","songsCount","size","dispatch","getBannerDataDispatch","actionTypes","getRecommendListDataDispatch","bannerListJS","toJS","recommendListJS","scrollRef","useRef","ref","onScroll","forceCheck","renderRoutes","route","routes"],"mappings":"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","file":"static/js/8.3c3be7f3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/music.64444b39.png\";","import styled from 'styled-components'\nimport style from '../../assets/global-style'\n\nexport const SliderContainer = styled.div`\n    position: relative;\n    box-sizing: border-box;\n    width: 100%;\n    height: 100%;\n    margin: auto;\n    background: white;\n    .before {\n        position: absolute;\n        top: -300px;\n        height: 400px;\n        width: 100%;\n        background: ${style[\"theme-color\"]};\n    }\n    .slider-container {\n        position: relative;\n        width: 98%;\n        height: 160px;\n        overflow: hidden;\n        margin: auto;\n        border-radius: 6px;\n        .slider-nav {\n            position: absolute;\n            display: block;\n            width: 100%;\n            height: 100%;\n        }\n\n        .swiper-pagination-bullet-active {\n            background: ${style[\"theme-color\"]}\n        }\n    }\n`","import React, { useEffect, useState } from 'react'\nimport { SliderContainer } from \"./style\";\nimport \"swiper/css/swiper.css\"\nimport Swiper from \"swiper\";\n\nfunction Slider(props) {\n    const [sliderSwiper, setSliderSwiper] = useState(null);\n    const { bannerList } = props;\n\n    useEffect(() => {\n        if (bannerList.length && !sliderSwiper) {\n            let sliderSwiper = new Swiper(\".slider-container\", {\n                initialSlide: 3,\n                autoplay: {\n                    delay: 5000,\n                },\n                // loop: true,\n                // autoplay: true,\n                // delay: 3000,\n                disableOnInteraction: false,\n                pagination: {\n                    el: '.swiper-pagination',\n                    type: 'bullets',\n                },\n            });\n            setSliderSwiper(sliderSwiper)\n        }\n    }, [bannerList.length, sliderSwiper]);\n\n    return (\n        <SliderContainer>\n            <div className=\"before\"></div>\n            <div className=\"slider-container\">\n                <div className=\"swiper-wrapper\">\n                    {\n                        bannerList.map((slider, index) => {\n                            return (\n                                <div className=\"swiper-slide\" key={slider.picUrl}>\n                                    <div className=\"slider-nav\">\n                                        <img src={slider.imageUrl} width=\"100%\" height=\"100%\" alt=\"recommend\" />\n                                    </div>\n                                </div>\n                            )\n                        })\n                    }\n                </div>\n                <div className=\"swiper-pagination\"></div>\n            </div>\n        </SliderContainer>\n    );\n}\n\nexport default React.memo(Slider);","import styled from 'styled-components'\nimport style from '../../assets/global-style'\n\nexport const ListWrapper = styled.div`\n    max-width: 100%;\n    .title {\n        font-weight: 700;\n        padding-left: 6px;\n        font-size: 14px;\n        line-height: 60px;\n    }\n`\n\nexport const List = styled.div`\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: space-around;\n`\n\nexport const ListItem = styled.div`\n    position: relative;\n    width: 32%;\n    .img_wrapper {\n        .decorate {\n            position: absolute;\n            top: 0;\n            width: 100%;\n            height: 35px;\n            border-radius: 3px;\n            background: linear-gradient(hsla (0, 0%, 43%, .4), hsla(0, 0%, 100%, 0));\n            z-index:1\n        }\n    \n        position: relative;\n        height: 0;\n        padding-bottom: 100%;\n        .play_count{\n            position: absolute;\n            right: 2px;\n            top: 2px;\n            font-size: ${style [\"font-size-s\"]};\n            line-height: 15px;\n            color: ${style [\"font-color-light\"]};\n            .play {\n                vertical-align: top;\n            }\n        }\n        img {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            border-radius: 3px;\n        }\n    }\n    .desc {\n        overflow: hidden;\n        margin-top: 2px;\n        padding: 0 2px;\n        height: 50px;\n        text-align: left;\n        font-size: ${style['font-size-s']};\n        line-height: 1.4;\n        color: ${style['font-color-desc']}\n    }\n`","import React from 'react'\nimport { useTranslation } from \"react-i18next\";\nimport {\n    ListWrapper,\n    ListItem,\n    List\n} from './style'\nimport { getCount } from \"../../api/utils\";\nimport LazyLoad from 'react-lazyload';\nimport { withRouter } from \"react-router-dom\";\n\nfunction RecommendList(props) {\n    const { t, i18n } = useTranslation('translation');\n\n    const enterDetail = (id) => {\n        props.history.push(`/recommend/${id}`)\n    }\n    \n    return (\n        <ListWrapper>\n            <h1 className=\"title\">{t('list_itle')}</h1>\n            <List>\n                {\n                    props.recommendList.map(item => {\n                        return (\n                            <ListItem key={item.id} onClick={() => enterDetail(item.id)}>\n                                <div className=\"img_wrapper\">\n                                    <div className=\"decorate\"></div>\n                                    <LazyLoad placeholder={<img width=\"100%\" height=\"100%\" src={require('./music.png')} alt=\"music\" />}>\n                                        <img src={item.picUrl + \"?param=300x300\"} width=\"100%\" height=\"100%\" alt=\"music\" />\n                                    </LazyLoad>\n                                    <div className=\"play_count\">\n                                        <i className=\"iconfont play\"></i>\n                                        <span className=\"count\">{getCount(item.playCount)}</span>\n                                    </div>\n                                </div>\n                                <div className=\"desc\">{item.name}</div>\n                            </ListItem>\n                        )\n                    })\n                }\n            </List>\n        </ListWrapper>\n    )\n}\n\nexport default React.memo(withRouter(RecommendList));","import styled from 'styled-components';\n\n// the soul of whole scroll and bounce back effect!!!\nexport const Content = styled.div`\n  position: fixed;\n  top: 90px; \n  bottom: ${props => props.play > 0?\"60px\": 0};\n  width: 100%;\n  left: 0;\n  width: 100%;\n`","import React , {useRef} from \"react\";\nimport Slider from \"../../components/slider\";\nimport RecommendList from \"../../components/list\";\nimport Scroll from \"../../baseUI/scroll\";\nimport Loading from \"../../baseUI/loading\";\nimport { Content } from \"./style\";\n\nimport { connect } from \"react-redux\";\nimport * as actionTypes from \"./store/actionCreators\";\nimport { useEffect } from \"react\";\nimport { forceCheck } from \"react-lazyload\";\nimport { renderRoutes } from \"react-router-config\";\n\n// debugger\nfunction Recommend(props) {\n  const { getBannerDataDispatch, getRecommendListDataDispatch } = props;\n  const { bannerList, recommendList, isLoading, songsCount } = props;\n\n  useEffect(() => {\n    if (!bannerList.size) {\n      getBannerDataDispatch();\n    }\n    if (!recommendList.size) {\n      getRecommendListDataDispatch();\n    }\n  }, []);\n\n  const bannerListJS = bannerList ? bannerList.toJS() : [];\n  const recommendListJS = recommendList ? recommendList.toJS() : [];\n  const scrollRef = useRef();\n  return (\n    <Content  play={songsCount}>\n      <Scroll className=\"list\" ref={scrollRef} onScroll={forceCheck}>\n        <div>\n          <Slider bannerList={bannerListJS}></Slider>\n          <RecommendList recommendList={recommendListJS}></RecommendList>\n        </div>\n      </Scroll>\n      {isLoading ? <Loading></Loading> : null}\n      {renderRoutes(props.route.routes)}\n    </Content>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  //dont toJS data here\n  // otherwise cause extra re-render\n  bannerList: state.getIn([\"recommend\", \"bannerList\"]),\n  recommendList: state.getIn([\"recommend\", \"recommendList\"]),\n  isLoading: state.getIn([\"recommend\", \"isLoading\"]),\n  songsCount: state.getIn(['player', 'playList']).size,//尽量减少toJS操作，直接取size属性就代表了list的长度\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getBannerDataDispatch() {\n      dispatch(actionTypes.getBannerList());\n    },\n    getRecommendListDataDispatch() {\n      dispatch(actionTypes.getRecommendList());\n    },\n  };\n};\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(React.memo(Recommend));\n"],"sourceRoot":""}