{"version":3,"sources":["baseUI/header/index.js","baseUI/music-note/index.js","application/SongList/style.js","application/SongList/index.js","application/Album/style.js","application/Album/index.js"],"names":["HeaderContainer","styled","div","style","Header","React","forwardRef","props","ref","handleClick","title","className","onClick","defaultProps","memo","Container","MusicNote","iconsRef","useRef","transform","prefixStyle","startAnimation","x","y","i","item","slice","call","current","children","running","left","top","display","setTimeout","querySelector","useImperativeHandle","createNode","text","template","tempNode","document","createElement","innerHTML","firstChild","useEffect","node","appendChild","forEach","addEventListener","this","SongList","SongItem","ul","noWrap","SongsList","refs","savedCount","songs","showSaved","changePlayListDispatch","changeCurrentIndexDispatch","changeSequecePlayListDispatch","musicAnimation","selectItem","e","index","nativeEvent","clientX","clientY","length","Math","floor","savedBy","map","key","name","ar","getName","artists","al","album","connect","dispatch","data","changePlayList","changeCurrentIndex","changeSequecePlayList","TopDesc","background","Menu","state","currentAlbum","getIn","enterLoading","getAlbumDataDispatch","id","changeEnterLoading","getAlbumList","useState","showStatus","setShowStatus","setIsMarquee","headerEl","match","params","currentAlbumImmutable","setTitle","musicNoteRef","handleBack","useCallback","toJS","pos","minScrollY","HEADER_HEIGHT","percent","abs","headerDom","backgroundColor","opacity","min","CSSTransition","in","timeout","classNames","appear","unmountOnExit","onExited","history","goBack","isEmptyObject","coverImgUrl","src","alt","subscribedCount","creator","avatarUrl","username","tracks"],"mappings":"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","file":"static/js/6.7caa6ac4.chunk.js","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport style from \"../../assets/global-style\";\nimport PropTypes from \"prop-types\";\n\nconst HeaderContainer = styled.div`\n  position: fixed;\n  padding: 5px 10px;\n  padding-top: 0;\n  height: 40px;\n  width: 100%;\n  z-index: 100;\n  display: flex;\n  line-height: 40px;\n  color: ${style[\"font-color-light\"]};\n  .back {\n    margin-right: 5px;\n    font-size: 20px;\n    width: 20px;\n  }\n  > h1 {\n    font-size: ${style[\"font-size-l\"]};\n    font-weight: 700;\n  }\n`;\nconst Header = React.forwardRef((props, ref) => {\n  const { handleClick, title } = props;\n  return (\n    <HeaderContainer ref={ref}>\n      <i className=\"iconfont back\" onClick={handleClick}>\n        &#xe655;\n      </i>\n      <h1>{title}</h1>\n    </HeaderContainer>\n  );\n});\n\nHeader.defaultProps = {\n  handleClick: () => {},\n  title: \"title\",\n};\n\nHeader.propTypes = {\n  handleClick: PropTypes.func,\n  title: PropTypes.string,\n};\nexport default React.memo(Header);\n","import React, {\n  forwardRef,\n  useRef,\n  useEffect,\n  useImperativeHandle,\n} from \"react\";\nimport styled from \"styled-components\";\nimport { prefixStyle } from './../../api/utils';\nimport style from '../../assets/global-style';\nconst Container = styled.div`\n.icon_wrapper{\n    position: fixed;\n    z-index: 1000;\n    margin-top: -10px;\n    margin-left: -10px;\n    color: ${style[\"theme-color\"]};\n    font-size: 14px;\n    display: none;\n    transition: transform 1s cubic-bezier(.62,-0.1,.86,.57);\n    >div {\n        transition: transform 1s;\n    }\n}\n}`;\n// transform: translate3d (0, 0, 0);\n\nconst MusicNote = forwardRef((props, ref) => {\n  const iconsRef = useRef();\n  const ICON_NUMBER = 3;\n  const transform = prefixStyle (\"transform\");\n\n  const startAnimation = ({ x, y }) => {\n    for (let i = 0; i < ICON_NUMBER; i++) {\n        let domArray = [].slice.call(iconsRef.current.children);\n        let item = domArray[i];\n      if (item.running === false) {\n        item.style.left = x + \"px\";\n        item.style.top = y + \"px\";\n        item.style.display = \"inline-block\";\n      }\n\n      setTimeout(() => {\n        item.running = true;\n        item.style[transform] = `translate3d(0, 750px, 0)`;\n        let icon = item.querySelector(\"div\");\n        icon.style[transform] = `translate3d(-40px, 0, 0)`;\n      }, 0);\n    }\n  };\n\n  useImperativeHandle(ref, () => ({\n    startAnimation\n  }))\n  const createNode = (text) => {\n    const template = `<div class='icon_wrapper'>${text}</div>`;\n    let tempNode = document.createElement(\"div\");\n    tempNode.innerHTML = template;\n    return tempNode.firstChild;\n  };\n  useEffect(() => {\n    for (let i = 0; i < ICON_NUMBER; i++) {\n      let node = createNode(`<div class=\"iconfont\">&#xe642;</div>`);\n      iconsRef.current.appendChild(node);\n    }\n\n    // let domArray = [...iconsRef.current.children];\n    // let domArray = Array.from(iconsRef.current.children)\n    let domArray = [].slice.call(iconsRef.current.children);\n    domArray.forEach((item) => {\n      item.running = false;\n      item.addEventListener(\n        \"transitionend\",\n        function () {\n          this.style[\"display\"] = \"none\";\n          this.style[transform] = `translate3d(0,0,0)`;\n          this.running = false;\n\n          let icon = this.querySelector(\"div\");\n          icon.style[transform] = `translate3d(0, 0, 0)`;\n        },\n        false\n      );\n    });\n  }, []);\n  return <Container ref={iconsRef}></Container>;\n});\n\nexport default MusicNote;\n","import styled from \"styled-components\";\nimport style from \"../../assets/global-style\";\n\nexport const SongList = styled.div`\n  background: ${style[\"highlight-background-color\"]};\n  opacity: 0.98;\n  border-radius: 10px;\n  line-height: 24px;\n  .songlist_top {\n    line-height: 40px;\n    box-sizing: border-box;\n    display: flex;\n    // padding: 10px 0;\n    margin: 0;\n    position: relative;\n    border-bottom: 1px solid ${style[\"border-color\"]};\n    justify-content: space-between;\n    .play_all {\n      flex: 3;\n      align-items: center;\n      display: flex;\n      justify-content: center;\n    }\n\n    .save {\n      border-radius: 10px;\n      flex: 2;\n      background: ${style[\"theme-color\"]};\n      color: ${style[\"font-color-light\"]};\n      display: flex;\n      font-size: 0;\n      line-height: 34px;\n      justify-content: center;\n      > span {\n        font-size: 14px;\n        vertical-align: top;\n      }\n    }s\n  }\n`;\n\nexport const SongItem = styled.ul`\n  > li {\n    display: flex;\n    .index {\n      flex-basis: 60px;\n      text-align: center;\n    }\n    .info {\n      box-sizing: border-box;\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      padding: 5px 0;\n      ${style.noWrap()}\n      justify-content: space-around;\n      border-bottom: 1px solid ${style[\"border-color\"]};\n      > span {\n        ${style.noWrap()}\n      }\n      > span:first-child {\n        color: ${style[\"font-color-desc\"]};\n      }\n      > span:last-child {\n        font-size: ${style[\"font-size-s\"]};\n        color: #bba8a8;\n      }\n    }\n  }\n`;","import React from \"react\";\nimport { SongList, SongItem } from \"./style\";\nimport { getName } from \"../../api/utils\";\nimport { changePlayList, changeCurrentIndex, changeSequecePlayList } from './../../application/Player/store/actionCreators';\nimport { connect } from 'react-redux';\n\nconst SongsList = React.forwardRef((props, refs) => {\n  const { savedCount, songs, showSaved } = props;\n  const { changePlayListDispatch, changeCurrentIndexDispatch, changeSequecePlayListDispatch } = props;\n  const { musicAnimation } = props;\n  const selectItem = (e, index) => {\n    changePlayListDispatch(songs);\n    changeSequecePlayListDispatch(songs);\n    changeCurrentIndexDispatch(index);\n    musicAnimation(e.nativeEvent.clientX, e.nativeEvent.clientY);\n  }\n\n  let savedBy = (savedCount) => {\n    return (\n      <div className=\"save\">\n        <span>\n          <i className=\"iconfont\">&#xe62d;</i>\n          Saved({Math.floor(savedCount / 1000) / 10}w)\n        </span>\n      </div>\n    );\n  };\n  let songList = (list) => {\n    let res = list.map((item, index) => {\n      return (\n        <li key={index} onClick={(e) => selectItem(e, index)}>\n          <span className=\"index\">{index + 1}</span>\n          <div className=\"info\">\n            <span>{item.name}</span>\n            <span>\n              {item.ar ? getName(item.ar) : getName(item.artists)} -{\" \"}\n              {item.al ? item.al.name : item.album.name}\n            </span>\n          </div>\n        </li>\n      );\n    });\n    return res;\n  };\n\n  return (\n    <SongList ref={refs}>\n      <div className=\"songlist_top\">\n        <div className=\"play_all\" onClick={(e) => selectItem(e, 0)}>\n          <i className=\"iconfont\">&#xe6e3;</i>\n          Play all<span>({songs.length} in total)</span>\n        </div>\n        {showSaved ? savedBy(savedCount) : null}\n      </div>\n      <SongItem>{songList(songs)}</SongItem>\n    </SongList>\n  );\n});\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    changePlayListDispatch(data) {\n      dispatch(changePlayList(data));\n    },\n    changeCurrentIndexDispatch(data) {\n      dispatch(changeCurrentIndex(data));\n    },\n    changeSequecePlayListDispatch(data) {\n      dispatch(changeSequecePlayList(data))\n    }\n  }\n};\nexport default connect(null, mapDispatchToProps)(React.memo(SongsList));\n","import styled from \"styled-components\";\nimport style from \"../../assets/global-style\";\n\nexport const Container = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1000;\n  background: £fff;\n  transform-origin: right bottom;\n  &.fly-enter,\n  &.fly-appear {\n    transform: rotateZ(30deg) translate3d(100%, 0, 0);\n  }\n  &.fly-enter-active,\n  &.fly-appear-active {\n    transition: transform 0.3s;\n    transform: rotateZ(0deg) translate3d(0, 0, 0);\n  }\n  &.fly-exit {\n    transform: rotateZ(0deg) translate3d(0, 0, 0);\n  }\n  &.fly-exit-active {\n    transition: transform 0.3s;\n    transform: rotateZ(30deg) translate3d(100%, 0, 0);\n  }\n`;\n\nexport const TopDesc = styled.div`\n  background-size: 100%;\n  height: 275px;\n  display: flex;\n  align-items: center;\n  padding: 5px 20px;\n  justify-content: space-around;\n  padding-bottom: 20px;\n  marigin-bottom: 20px;\n  position: relative;\n  .background {\n    z-index: -1;\n    background: url(${(props) => props.background}) no-repeat;\n    width: 100%;\n    height: 100%;\n    background-size: 100% 100%;\n    background-position: 0 0;\n    position: absolute;\n    filter: blur(20px);\n    .filter {\n      position: absolute;\n      z-index: 10;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(7, 17, 27, 0.2);\n    }\n  }\n  .img_wrapper_left {\n    width: 120px;\n    height: 120px;\n    position: relative;\n    img {\n      width: 120px;\n      height: 120px;\n      border-radius: 3px;\n    }\n    .decorate {\n      position: absolute;\n      top: 0;\n      width: 100%;\n      height: 35px;\n      border-radius: 3px;\n      background: linear-gradient(hsla(0, 0%, 43%, 0.4), hsla(0, 0%, 100%, 0));\n    }\n    .play_amount {\n      right: 2px;\n      top: 2px;\n      position: absolute;\n      font-size: ${style[\"font-size-s\"]};\n      line-height: 15px;\n      color: ${style[\"font-color-light\"]};\n      .play {\n        vertical-align: top;\n      }\n    }\n  }\n  .desc_wrapper_right {\n    display: flex;\n    flex-direction: column;\n    height: 120px;\n    padding: 0 10px;\n    .title {\n      color: ${style[\"font-color-light\"]};\n      font-size: ${style[\"font-size-l\"]};\n      max-height: 70px;\n      line-height: 1.5;\n      padding: 10px 0;\n    }\n    .author {\n      display: flex;\n      .avatar {\n        margin-right: 5px;\n      }\n      .name {\n        line-height: 20px;\n        font-size: ${style[\"font-size-m\"]};\n        color: ${style[\"font-color-desc-v2\"]};\n      }\n    }\n    img {\n      width: 20px;\n      height: 20px;\n      border-radius: 50%;\n    }\n  }\n`;\nexport const Menu = styled.div`\n  // position: relative;\n  display: flex;\n  justify-content: space-between;\n  margin-top: -100px;\n  padding: 20px 30px;\n  color: ${style[\"font-color-light\"]};\n  > div {\n    display: flex;\n    flex-direction: column;\n  }\n`;\n\n","import React, { useState, useEffect, useCallback, useRef } from \"react\";\nimport { Container } from \"./style\";\nimport { CSSTransition } from \"react-transition-group\";\nimport Header from \"./../../baseUI/header/index\";\nimport Scroll from \"../../baseUI/scroll\";\nimport { isEmptyObject } from \"../../api/utils\";\nimport { TopDesc, Menu } from \"./style\";\nimport { connect } from \"react-redux\";\nimport { getAlbumList, changeEnterLoading } from \"./store/actionCreators\";\nimport SongList from \"../SongList\";\nimport { HEADER_HEIGHT } from './../../api/config';\nimport style from \"../../assets/global-style\";\nimport MusicNote from \"../../baseUI/music-note/index\";\n\nfunction Album(props) {\n  const [showStatus, setShowStatus] = useState(true);\n  const [isMarquee, setIsMarquee] = useState(false);//是否跑马灯\n  const headerEl = useRef();\n\n  const id = props.match.params.id;\n  const { currentAlbum: currentAlbumImmutable, enterLoading } = props;\n  const { getAlbumDataDispatch } = props;\n\n  const [title, setTitle] = useState(\"歌单\");\n  const musicNoteRef = useRef()\n  useEffect(() => {\n    getAlbumDataDispatch(id);\n  }, [getAlbumDataDispatch, id]);\n\n  const handleBack = useCallback(() => {\n    setShowStatus(false);\n  }, []);\n\n  let currentAlbum = currentAlbumImmutable.toJS();\n \n  const musicAnimation = (x, y) => {\n    musicNoteRef.current.startAnimation({ x, y });\n  }\n  const handleScroll = useCallback(\n    (pos) => {\n      let minScrollY = -HEADER_HEIGHT;\n      let percent = Math.abs(pos.y / minScrollY);\n      let headerDom = headerEl.current;\n      if (pos.y < minScrollY) {\n        headerDom.style.backgroundColor = style[\"theme-color\"];\n        headerDom.style.opacity = Math.min(1, (percent - 1) / 2);\n        setTitle(currentAlbum.name);\n        setIsMarquee(true);\n      } else {\n        headerDom.style.backgroundColor = \"\";\n        headerDom.style.opacity = 1;\n        setTitle(\"歌单\");\n        setIsMarquee(false);\n      }\n    },\n    [currentAlbum]\n  );\n  return (\n    <CSSTransition\n      in={showStatus}\n      timeout={300}\n      classNames=\"fly\"\n      appear={true}\n      unmountOnExit\n      onExited={props.history.goBack}\n    >\n      <Container>\n        <Header title=\"back\" handleClick={handleBack}></Header>\n        {!isEmptyObject(currentAlbum) ? (\n          <Scroll>\n          {/* </Scroll> onScroll={handleScroll}> */}\n          <div>\n            <TopDesc background={currentAlbum.coverImgUrl}>\n              <div className=\"background\">\n                <div className=\"filter\"></div>\n              </div>\n              <div className=\"img_wrapper_left\">\n                <div className=\"decorate\"></div>\n                <img src={currentAlbum.coverImgUrl} alt=\"\" />\n                <div className=\"play_amount\">\n                  <i className=\"iconfont play\">&#xe885;</i>\n                  <span className=\"amount\">{`${Math.floor(\n                    currentAlbum.subscribedCount / 1000\n                    )}W`}</span>\n                </div>\n              </div>\n              <div className=\"desc_wrapper_right\">\n                <div className=\"title\">{currentAlbum.name}</div>\n                <div className=\"author\">\n                  <div className=\"avatar\">\n                    <img src={currentAlbum.creator.avatarUrl} alt=\"\" />\n                  </div>\n                  <div className=\"name\">{currentAlbum.creator.username}</div>\n                </div>\n              </div>\n            </TopDesc>\n            <Menu>\n              <div>\n                <i className=\"iconfont\">&#xe6ad;</i>\n                Comment\n              </div>\n              <div>\n                <i className=\"iconfont\">&#xe86f;</i>\n                Like\n              </div>\n              <div>\n                <i className=\"iconfont\">&#xe62d;</i>\n                Save\n              </div>\n              <div>\n                <i className=\"iconfont\">&#xe606;</i>\n                More\n              </div>\n            </Menu>\n            <SongList\n              savedCount={currentAlbum.subscribedCount}\n              songs={currentAlbum.tracks}\n              showSaved={true}\n              musicAnimation={musicAnimation}\n            />\n            <MusicNote ref={musicNoteRef} />\n            </div>\n          </Scroll>\n        ) : null}\n      </Container>\n    </CSSTransition>\n  );\n}\nconst mapStateToProps = (state) => ({\n  currentAlbum: state.getIn([\"album\", \"currentAlbum\"]),\n  enterLoading: state.getIn([\"album\", \"enterLoading\"]),\n});\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getAlbumDataDispatch(id) {\n      dispatch(changeEnterLoading(true));\n      dispatch(getAlbumList(id));\n    },\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(React.memo(Album));\n"],"sourceRoot":""}